<template>
  <!-- slider -->
  <div
    class="tw-container tw-px-0 content-page "
  >
    <div class=" tw-hidden xl:tw-grid xl:tw-content-between tw-grid-rows-1_auto tw-pb-5">
      <div class=" tw-overflow-auto">
        
        <h4 class="tw-px-9 tw-py-8" >{{ t("titleSidebar") }}:</h4>
        <div class=" tw-grid tw-gap-6">

          <div v-for="item in typesDirevative" class=" accordion" :class="{active:typeDirevative === item }" @click="selectTypeDirevatives(item)" >
            <button class=" accordion__head">
              <span>
    
                {{item}}
              </span>
              <svg class="icon" width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 1.10638L6 5.89362L11 1.10638" stroke="white" stroke-width="0.967046" stroke-linecap="round"/>
              </svg>
    
            </button>
            
            <div v-if="charts.length > 0" class="accordion__body">
              <div class="child">
    
                <button
                  class="item-chart"
                  v-for="derivative in derivatives"
                  :key="derivative.id"
                  :class="{ active: slide === derivative.id }"
                  @click="slide = derivative.id"
                >
                  <div class="tw-flex tw-flex-col tw-justify-between tw-h-full">
                    <h4 class="tw-text-sm tw-text-left">{{ derivative.name }}</h4>
                    <div class="tw-flex tw-gap-x-2.5">
                      <MarkIcon
                        class="tw-w-4 tw-h-4"
                        :mark="getChart(derivative.id).profitability"
                      />
                      <h4 class="tw-text-base">
                        {{ getChart(derivative.id)?.profitability }}%
                      </h4>
                    </div>
                  </div>
        
                  <div v-if="getChart(derivative.id)" class="tw-justify-self-end">
                    <div>
                      <!-- <MiniAreaChart
                        :values="getChartData(derivative.id)"
                        width="68"
                        height="34"
                      /> -->
        
                      <button
                        @click="stage2"
                        class="tw-mt-2 tw-flex tw-gap-1.5 tw-items-center"
                      >
                        <span class="tw-text-xxs-1">{{ t("buy") }}</span>
                        <img src="~assets/icons/button-arrow.svg" alt="" />
                      </button>
                    </div>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class=" tw-text-xxs tw-text-title tw-text-center">
        Â© 2021-2023 ALGA. <br>
        All Rights Reserved
      </div>
    </div>
    <div
      class="tw-flex tw-flex-col tw-relative tw-px-4 xl:tw-px-15 tw-border-l tw-border-gray-border"
    >
      <div
        class="item tw-flex tw-justify-center tw-text-center tw-items-center tw-mb-6 xl:tw-mb-10"
      >
        <h2>
          {{ t("indexderivatives.title") }}
        </h2>
      </div>
      
      <div class=" tw-flex xl:tw-hidden tw-justify-center xl:tw-gap-5 tw-gap-3 tw-mb-5">
          <base-button
                v-for="item in typesDirevative"
                class="button button__dense "
                :design="typeDirevative === item ? 'green': 'border'"
                @click="selectTypeDirevatives(item)"
              >
              {{ item }}
              </base-button>
      </div>
      
      <q-carousel
        swipeable
        animated
        v-model="slide"
        ref="carousel"
        class="bg-transparent"
        height="100%"
        :padding="false"
      >
        <q-carousel-slide
          v-for="derivative in derivatives"
          :key="derivative.id"
          :name="derivative.id"
        >
          <div
            class="tw-mb-7.5 xl:tw-mb-10 index-directive tw-grid xl:tw-flex tw-items-center tw-gap-8"
          >
            <div style="width: 170px" class=" tw-justify-items-center tw-mx-auto">
              <RoundDiagram
                class="inside__round"
                :values="roundDiagramData(derivative['currency_shares'])"
                :colors="roundDiagramColors(derivative['currency_shares'])"
              >
                <template #image>
                  <image
                    x="180"
                    y="180"
                    width="140"
                    :xlink:href="derivative.image.url"
                  />
                </template>
              </RoundDiagram>
            </div>
            
              
            <div class="tw-flex-grow">
              <div class="item tw-mb-5 tw-flex tw-justify-between">
                <div class="tw-flex tw-gap-10 tw-items-center">
                  <div class="tw-flex tw-flex-col">
                    <h4>{{ derivative.name }}</h4>
                    <p>
                      {{
                        t("indexderivatives.time", {
                          from: derivative["opening_at"],
                          to: derivative["closing_at"],
                        })
                      }}
                    </p>
                  </div>
                </div>
                <base-button
                  data-index
                  @click="stage2($event, derivative.id)"
                  class="button  tw-w-full tw-hidden xl:tw-block xl:tw-w-auto"
                  >{{ t("buy") }}</base-button
                >
                
              </div>
              <base-button
                  data-index
                  @click="stage2($event, derivative.id)"
                  class="button tw-mb-4  tw-w-full xl:tw-hidden xl:tw-w-auto"
                  >{{ t("buy") }}</base-button
                >
              <p class="text">
                {{ derivative.description }}
              </p>
            </div>
          </div>
          <div class="tw-mb-20 tw-flex tw-flex-wrap tw-gap-2.5 xl:tw-hidden">
            <div
              class="slide-button"
              v-for="derivative in derivatives"
              :key="derivative.id"
              :class="{ active: slide === derivative.id }"
              @click="slide = derivative.id"
            >
              <img :src="derivative.image.url" alt="" />
            </div>
          </div>

          <div>
            <div class="inside tw-mb-10">
              <div class="table">
                <div class="table-head tw-mb-5">
                  <h4 class="">
                    {{ t("inside.title") }}
                  </h4>
                  <div class=" head-items">
                    <span></span>
                    <span> cost </span>
                    <span> alteration </span>
                    
                  </div>
                </div>
                <ul class="table-body coinlist">
                  <li
                    class="item tw-flex tw-justify-between tw-items-center"
                    v-for="currency in derivative['currency_shares']"
                    :key="derivative.id + '_' + currency.id"
                  >
                    <div class="tw-flex tw-gap-3-1 tw-items-center">
                      <img
                        :src="currency.image.url"
                        alt="bitcoin"
                        width="30"
                        height="30"
                        class=" tw-rounded-full"
                      />
                      <span>{{ currency.name }}</span>
                    </div>
                    <span>{{ currency["percent_share"] }}%</span>
                    <span>{{ currency["percent_share"] }}%</span>
                    
                  </li>
                </ul>
              </div>
            </div>
            <div class="tw-pb-10 statistics">
              <div class="statistics__top">
                <div class="tw-flex tw-justify-between">
                  <!-- <div>{{ t("statistics.title") }}</div> -->
                  <!-- <base-select
                    :options="[
                      {
                        label: t('statistics.selectProfit', { numb: '1' }),
                        id: 1,
                      },
                    ]"
                  /> -->
                </div>
              </div>

              <div class="statistics__bottom" v-if="charts.length > 0">
                <AreaChart
                  :valSeries="getChartData(derivative.id)"
                  class="tw-order-2 xl:tw-order-1"
                  :key="derivative.id"
                />
                <div
                  class="tw-flex tw-justify-between tw-items-center tw-order-1 xl:tw-block tw-mt-5 xl:tw-order-2"
                >
                  <div
                    class="tw-mb-2.5"
                    v-html="t('statistics.profitText', { numb: '1' })"
                  ></div>
                  <div class="tw-text-md2 tw-flex tw-gap-x-2.5">
                    <MarkIcon :mark="getChart(derivative.id).profitability" />
                    {{ getChart(derivative.id).profitability }}%
                  </div>
                </div>
              </div>
            </div>
          </div>
        </q-carousel-slide>
      </q-carousel>
      
      <Transition
        appear
        mode="out-in"
        enter-active-class="animated zoomIn"
        leave-active-class="animated zoomOut"
      >
        <div
          v-show="isPopup"
          data-popup
          class="card card__border-line tw-absolute tw-w-full tw-top-1/2 tw-left-0"
          ref="popup"
        >
          <div class="tw-text-lg tw-leading-snug xl:tw-text-md2 tw-mb-2.5">
            {{ t("popup.titleBuy") }}
          </div>
          <Form
            class="tw-flex tw-flex-col xl:tw-flex-row tw-gap-2.5"
            @submit="popupAction"
            v-slot="{ isSubmitting }"
          >
            <div class="tw-flex tw-flex-col xl:tw-w-1/3">
              <label
                class="tw-text-purple-dark tw-text-xs tw-leading-4"
                for="amount"
                >{{ t("popup.amount.label") }}</label
              >
              <AppInput
                id="amount"
                type="number"
                name="amount"
                label=""
                inputClass="app-input__field--standart-valute"
              >
                <template #append>
                  <span class="tw-text-purple-light">USDT</span>
                </template>
              </AppInput>
            </div>

            <base-button
              class="xl:tw-self-end xl:tw-w-1/3"
              type="submit"
              :disabled="isSubmitting"
              >{{ t("popup.request") }}</base-button
            >
          </Form>
          <p class="tw-mt-5 tw-text-xxs">
            *{{ t("popup.text") }}
          </p>
        </div>
      </Transition>
    </div>
  </div>
</template>

<script>
import { ref, onMounted, computed, watch } from "vue";
import RoundDiagram from "src/components/V3/RaoundDiagram.vue";
import AreaChart from "src/components/V3/AreaChart.vue";
import MarkIcon from "src/components/V3/MarkIcon.vue";
import MiniAreaChart from "src/components/V3/MiniAreaChart.vue";
import { useI18n } from "vue-i18n";
import { useStore } from "vuex";
import useChart from "src/composition/useChart.js";
import useChartData from "src/composition/V3/useChartData.js";
import useBuyWidthdrawalPopup from "src/composition/V3/useBuyWidthdrawalPopup";
const i18n = {
  messages: {
    "en-US": {
      buy: "Buy",
      titleSidebar: 'Derivatives',
      indexderivatives: {
        title: "Index Derivatives",
        time: "from {from} to {to}",
        items: [
          "BTC main is the base index of ALGA INDEX DERIVATIVES PLATFORM. It is an index designed to track the world's largest crypto asset. You will gain access to a crypto asset with the security and convenience of a traditional investment vehicle, while lowering the logistical barriers to entry (access to exchanges, storage, and execution costs)",
          "ETH main - ALGA INDEX DERIVATIVES PLATFORM base index. It is a capitalization-weighted index that tracks the performance of major financial crypto assets built on the Ethereum blockchain. You will gain access to a crypto asset with the security and convenience of a traditional investment vehicle, while lowering the logistical barriers to entry (access to exchanges, storage, and execution costs)",
          "BTC combo - ALGA INDEX DERIVATIVES PLATFORM base index. it is a balanced index composed of the most valuable cryptoassets, weighted by market capitalization, time-tested and monitored for certain risks with monthly rebalancing. The index has a public methodology for its formation, which includes the rules of acceptability, identifying critical risks (storage, liquidity, execution costs, and others)",
          "ETH combo - ALGA INDEX DERIVATIVES PLATFORM base index. It is a balanced index composed of the most valuable cryptoassets, weighted by market capitalization, time-tested and monitored for certain risks with monthly rebalancing. The index has a public methodology for its formation, which includes the rules of acceptability, identifying critical risks (storage, liquidity, execution costs, and others)",
          "Stable index is a stable base index ALGA INDEX DERIVATIVES PLATFORM, consisting of 6 leading stablecoins in the cryptocurrency market, weighted by capitalization. The index is not subject to high volatility in the market, allowing you to keep your cryptocurrency savings for a certain period. Stable index is a smart and secure way to get diversified access to crypto assets with minimal fees",
        ],
      },
      inside: {
        title: "What's inside",
      },
      statistics: {
        title: "Statistics",
        profitText: "Profitability <br> for {numb} months",
        selectProfit: "Last {numb} months",
      },
      popup: {
        title: "Withdrawal Request",
        titleBuy: "Deposite request",
        text: "Available for withdrawal:",
        amount: {
          label: "Deposite sum, USDT",
        },
        "wallet-number": {
          label: "Wallet number",
        },
        request: "Leave a request",
        text:`After clicking the button, pay, you will be redirected to the gateway.
             If nothing opens, please check your pop-up blocker.
             browser windows`
      },
    },
    "ru-RU": {
      buy: "ÐÑÐ¿Ð¸ÑÑ",
      titleSidebar: 'ÐÐ¸ÑÐµÐ²Ð°ÑÐ¸Ð²Ñ',
      indexderivatives: {
        title: "ÐÐ½Ð´ÐµÐºÑÐ½ÑÐµ Ð´ÐµÑÐ¸Ð²Ð°ÑÐ¸Ð²Ñ",
        time: "Ñ {from} Ð¿Ð¾ {to}",
        items: [
          "BTC main â Ð±Ð°Ð·Ð¾Ð²ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ ALGA INDEX DERIVATIVES PLATFORM. Ð­ÑÐ¾ Ð¸Ð½Ð´ÐµÐºÑ, Ð¿ÑÐµÐ´Ð½Ð°Ð·Ð½Ð°ÑÐµÐ½Ð½ÑÐ¹ Ð´Ð»Ñ Ð¾ÑÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ ÐºÑÑÐ¿Ð½ÐµÐ¹ÑÐµÐ³Ð¾ Ð² Ð¼Ð¸ÑÐµ ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ð°. ÐÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÐµ Ð´Ð¾ÑÑÑÐ¿ Ðº ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ñ Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑÑÑ Ð¸ ÑÐ´Ð¾Ð±ÑÑÐ²Ð¾Ð¼ ÑÑÐ°Ð´Ð¸ÑÐ¸Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ð²ÐµÑÑÐ¸ÑÐ¸Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¸Ð½ÑÑÑÑÐ¼ÐµÐ½ÑÐ°, ÑÐ½Ð¸Ð¶Ð°Ñ Ð¿ÑÐ¸ ÑÑÐ¾Ð¼ Ð»Ð¾Ð³Ð¸ÑÑÐ¸ÑÐµÑÐºÐ¸Ðµ Ð±Ð°ÑÑÐµÑÑ Ð´Ð»Ñ Ð²ÑÐ¾Ð´Ð° (Ð´Ð¾ÑÑÑÐ¿ Ðº Ð±Ð¸ÑÐ¶Ð°Ð¼, ÑÑÐ°Ð½ÐµÐ½Ð¸Ðµ Ð¸ Ð·Ð°ÑÑÐ°ÑÑ Ð½Ð° Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ).",
          "ETH main - Ð±Ð°Ð·Ð¾Ð²ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ ALGA INDEX DERIVATIVES PLATFORM. Ð­ÑÐ¾ Ð¸Ð½Ð´ÐµÐºÑ, Ð²Ð·Ð²ÐµÑÐµÐ½Ð½ÑÐ¹ Ð¿Ð¾ ÐºÐ°Ð¿Ð¸ÑÐ°Ð»Ð¸Ð·Ð°ÑÐ¸Ð¸, ÐºÐ¾ÑÐ¾ÑÑÐ¹ Ð¾ÑÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÑ ÑÑÑÐµÐºÑÐ¸Ð²Ð½Ð¾ÑÑÑ Ð¾ÑÐ½Ð¾Ð²Ð½ÑÑ ÑÐ¸Ð½Ð°Ð½ÑÐ¾Ð²ÑÑ ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ð¾Ð², Ð¿Ð¾ÑÑÑÐ¾ÐµÐ½Ð½ÑÑ Ð½Ð° Ð±Ð»Ð¾ÐºÑÐµÐ¹Ð½Ðµ Ethereum. ÐÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÐµ Ð´Ð¾ÑÑÑÐ¿ Ðº ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ñ Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑÑÑ Ð¸ ÑÐ´Ð¾Ð±ÑÑÐ²Ð¾Ð¼ ÑÑÐ°Ð´Ð¸ÑÐ¸Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ð²ÐµÑÑÐ¸ÑÐ¸Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¸Ð½ÑÑÑÑÐ¼ÐµÐ½ÑÐ°, ÑÐ½Ð¸Ð¶Ð°Ñ Ð¿ÑÐ¸ ÑÑÐ¾Ð¼ Ð»Ð¾Ð³Ð¸ÑÑÐ¸ÑÐµÑÐºÐ¸Ðµ Ð±Ð°ÑÑÐµÑÑ Ð´Ð»Ñ Ð²ÑÐ¾Ð´Ð° (Ð´Ð¾ÑÑÑÐ¿ Ðº Ð±Ð¸ÑÐ¶Ð°Ð¼, ÑÑÐ°Ð½ÐµÐ½Ð¸Ðµ Ð¸ Ð·Ð°ÑÑÐ°ÑÑ Ð½Ð° Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ).",
          "BTC combo - Ð±Ð°Ð·Ð¾Ð²ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ ALGA INDEX DERIVATIVES PLATFORM. ÑÑÐ¾ ÑÐ±Ð°Ð»Ð°Ð½ÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð½ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ, ÑÐ¾ÑÑÐ¾ÑÑÐ¸Ð¹ Ð¸Ð· Ð½Ð°Ð¸Ð±Ð¾Ð»ÐµÐµ ÑÐµÐ½Ð½ÑÑ ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ð¾Ð², Ð²Ð·Ð²ÐµÑÐµÐ½Ð½ÑÑ Ð¿Ð¾ ÑÑÐ½Ð¾ÑÐ½Ð¾Ð¹ ÐºÐ°Ð¿Ð¸ÑÐ°Ð»Ð¸Ð·Ð°ÑÐ¸Ð¸, Ð¿ÑÐ¾Ð²ÐµÑÐµÐ½Ð½ÑÑ Ð²ÑÐµÐ¼ÐµÐ½ÐµÐ¼ Ð¸ Ð¾ÑÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÐ¼ÑÑ Ð½Ð° Ð½Ð°Ð»Ð¸ÑÐ¸Ðµ Ð¾Ð¿ÑÐµÐ´ÐµÐ»ÐµÐ½Ð½ÑÑ ÑÐ¸ÑÐºÐ¾Ð² Ñ ÐµÐ¶ÐµÐ¼ÐµÑÑÑÐ½Ð¾Ð¹ ÑÐµÐ±Ð°Ð»Ð°Ð½ÑÐ¸ÑÐ¾Ð²ÐºÐ¾Ð¹. ÐÐ½Ð´ÐµÐºÑ Ð¸Ð¼ÐµÐµÑ Ð¾Ð±ÑÐµÐ´Ð¾ÑÑÑÐ¿Ð½ÑÑ Ð¼ÐµÑÐ¾Ð´Ð¾Ð»Ð¾Ð³Ð¸Ñ ÑÐ²Ð¾ÐµÐ³Ð¾ ÑÐ¾ÑÐ¼Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ, ÐºÐ¾ÑÐ¾ÑÐ°Ñ Ð²ÐºÐ»ÑÑÐ°ÐµÑ Ð² ÑÐµÐ±Ñ Ð¿ÑÐ°Ð²Ð¸Ð»Ð° Ð¿ÑÐ¸ÐµÐ¼Ð»ÐµÐ¼Ð¾ÑÑÐ¸, Ð²ÑÑÐ²Ð»ÐµÐ½Ð¸Ñ ÐºÑÐ¸ÑÐ¸ÑÐµÑÐºÐ¸Ñ ÑÐ¸ÑÐºÐ¾Ð² (ÑÑÐ°Ð½ÐµÐ½Ð¸Ðµ, Ð»Ð¸ÐºÐ²Ð¸Ð´Ð½Ð¾ÑÑÑ, Ð·Ð°ÑÑÐ°ÑÑ Ð½Ð° Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¸ Ð´ÑÑÐ³Ð¸Ðµ).",
          "ETH combo - Ð±Ð°Ð·Ð¾Ð²ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ ALGA INDEX DERIVATIVES PLATFORM. Ð­ÑÐ¾ ÑÐ±Ð°Ð»Ð°Ð½ÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð½ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ, ÑÐ¾ÑÑÐ¾ÑÑÐ¸Ð¹ Ð¸Ð· Ð½Ð°Ð¸Ð±Ð¾Ð»ÐµÐµ ÑÐµÐ½Ð½ÑÑ ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ð¾Ð², Ð²Ð·Ð²ÐµÑÐµÐ½Ð½ÑÑ Ð¿Ð¾ ÑÑÐ½Ð¾ÑÐ½Ð¾Ð¹ ÐºÐ°Ð¿Ð¸ÑÐ°Ð»Ð¸Ð·Ð°ÑÐ¸Ð¸, Ð¿ÑÐ¾Ð²ÐµÑÐµÐ½Ð½ÑÑ Ð²ÑÐµÐ¼ÐµÐ½ÐµÐ¼ Ð¸ Ð¾ÑÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÐ¼ÑÑ Ð½Ð° Ð½Ð°Ð»Ð¸ÑÐ¸Ðµ Ð¾Ð¿ÑÐµÐ´ÐµÐ»ÐµÐ½Ð½ÑÑ ÑÐ¸ÑÐºÐ¾Ð² Ñ ÐµÐ¶ÐµÐ¼ÐµÑÑÑÐ½Ð¾Ð¹ ÑÐµÐ±Ð°Ð»Ð°Ð½ÑÐ¸ÑÐ¾Ð²ÐºÐ¾Ð¹. ÐÐ½Ð´ÐµÐºÑ Ð¸Ð¼ÐµÐµÑ Ð¾Ð±ÑÐµÐ´Ð¾ÑÑÑÐ¿Ð½ÑÑ Ð¼ÐµÑÐ¾Ð´Ð¾Ð»Ð¾Ð³Ð¸Ñ ÑÐ²Ð¾ÐµÐ³Ð¾ ÑÐ¾ÑÐ¼Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ, ÐºÐ¾ÑÐ¾ÑÐ°Ñ Ð²ÐºÐ»ÑÑÐ°ÐµÑ Ð² ÑÐµÐ±Ñ Ð¿ÑÐ°Ð²Ð¸Ð»Ð° Ð¿ÑÐ¸ÐµÐ¼Ð»ÐµÐ¼Ð¾ÑÑÐ¸, Ð²ÑÑÐ²Ð»ÐµÐ½Ð¸Ñ ÐºÑÐ¸ÑÐ¸ÑÐµÑÐºÐ¸Ñ ÑÐ¸ÑÐºÐ¾Ð² (ÑÑÐ°Ð½ÐµÐ½Ð¸Ðµ, Ð»Ð¸ÐºÐ²Ð¸Ð´Ð½Ð¾ÑÑÑ, Ð·Ð°ÑÑÐ°ÑÑ Ð½Ð° Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¸ Ð´ÑÑÐ³Ð¸Ðµ).",
          "Stable index â ÑÑÑÐ¾Ð¹ÑÐ¸Ð²ÑÐ¹ Ð±Ð°Ð·Ð¾Ð²ÑÐ¹ Ð¸Ð½Ð´ÐµÐºÑ ALGA INDEX DERIVATIVES PLATFORM, ÑÐ¾ÑÑÐ¾ÑÑÐ¸Ð¹ Ð¸Ð· 6 Ð²ÐµÐ´ÑÑÐ¸Ñ ÑÑÐµÐ¹Ð±Ð»ÐºÐ¾Ð¸Ð½Ð¾Ð² Ð½Ð° ÐºÑÐ¸Ð¿ÑÐ¾Ð²Ð°Ð»ÑÑÐ½Ð¾Ð¼ ÑÑÐ½ÐºÐµ, Ð²Ð·Ð²ÐµÑÐµÐ½Ð½ÑÑ Ð¿Ð¾ ÐºÐ°Ð¿Ð¸ÑÐ°Ð»Ð¸Ð·Ð°ÑÐ¸Ð¸. ÐÐ½Ð´ÐµÐºÑ Ð½Ðµ Ð¿Ð¾Ð´Ð²ÐµÑÐ¶ÐµÐ½ Ð²ÑÑÐ¾ÐºÐ¾Ð¹ Ð²Ð¾Ð»Ð°ÑÐ¸Ð»ÑÐ½Ð¾ÑÑÐ¸ Ð½Ð° ÑÑÐ½ÐºÐµ, Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑÐ¸Ð¹ ÑÐ¾ÑÑÐ°Ð½Ð¸ÑÑ Ð²Ð°ÑÐ¸ ÐºÑÐ¸Ð¿ÑÐ¾Ð²Ð°Ð»ÑÑÐ½ÑÐµ ÑÐ±ÐµÑÐµÐ¶ÐµÐ½Ð¸Ñ Ð½Ð° Ð¾Ð¿ÑÐµÐ´ÐµÐ»ÐµÐ½Ð½ÑÐ¹ ÑÑÐ¾Ðº. Stable index â ÑÐ¼Ð½ÑÐ¹ Ð¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½ÑÐ¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¿Ð¾Ð»ÑÑÐ¸ÑÑ Ð´Ð¸Ð²ÐµÑÑÐ¸ÑÐ¸ÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð½ÑÐ¹ Ð´Ð¾ÑÑÑÐ¿ Ðº ÐºÑÐ¸Ð¿ÑÐ¾Ð°ÐºÑÐ¸Ð²Ð°Ð¼ Ñ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑÐ½ÑÐ¼Ð¸ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¾Ð½Ð½ÑÐ¼Ð¸ Ð¸Ð·Ð´ÐµÑÐ¶ÐºÐ°Ð¼Ð¸.",
        ],
      },
      inside: {
        title: "Ð§ÑÐ¾ Ð²Ð½ÑÑÑÐ¸",
      },
      statistics: {
        title: "Ð¡ÑÐ°ÑÐ¸ÑÑÐ¸ÐºÐ°",
        profitText: "ÐÐ¾ÑÐ¾Ð´Ð½Ð¾ÑÑÑ <br> Ð·Ð° {numb} Ð¼ÐµÑÑÑÐ°",
        selectProfit: "ÐÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ {numb} Ð¼ÐµÑÑÑÐ°",
      },
      popup: {
        title: "ÐÐ°Ð¿ÑÐ¾Ñ Ð½Ð° Ð²ÑÐ²Ð¾Ð´ ÑÑÐµÐ´ÑÑÐ²",
        titleBuy: "ÐÐ°Ð¿ÑÐ¾Ñ Ð½Ð° Ð¿Ð¾Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ",
        text: "ÐÐ¾ÑÑÑÐ¿Ð½Ð¾ Ð´Ð»Ñ Ð²ÑÐ²Ð¾Ð´Ð°:",
        amount: {
          label: "ÐÐ²ÐµÐ´Ð¸ÑÐµ ÑÑÐ¼Ð¼Ñ, Ð² USDT",
        },
        "wallet-number": {
          label: "ÐÐ¾Ð¼ÐµÑ ÑÑÐµÑÐ°",
        },
        request: "Ð Ð¾Ð¿Ð»Ð°ÑÐµ",
        text: `ÐÐ¾ÑÐ»Ðµ Ð½Ð°Ð¶Ð°ÑÐ¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸, Ð¾Ð¿Ð»Ð°ÑÐ¸ÑÑ, Ð²Ñ Ð±ÑÐ´ÐµÑÐµ Ð¿ÐµÑÐµÐ½Ð°Ð¿ÑÐ°Ð²Ð»ÐµÐ½Ñ Ð½Ð° ÑÐ»ÑÐ·.
            ÐÑÐ»Ð¸ Ð½Ð¸ÑÐµÐ³Ð¾ Ð½Ðµ Ð¾ÑÐºÑÑÐ»Ð¾ÑÑ, Ð¿ÑÐ¾ÑÐ¸Ð¼ Ð¿ÑÐ¾Ð²ÐµÑÐ¸ÑÑ Ð±Ð»Ð¾ÐºÐ¸ÑÐ¾Ð²ÐºÑ Ð²ÑÐ¿Ð»ÑÐ²Ð°ÑÑÐ¸Ñ
            Ð¾ÐºÐ¾Ð½ Ð±ÑÐ°ÑÐ·ÐµÑÐ°`
      },
    },
    de: {
      buy: "Kaufen",
      indexderivatives: {
        title: "Index Derivates",
        time: "von {from} bis {to}",
        items: [
          "BTC main ist der Basisindex von ALGA INDEX DERIVATIVES PLATFORM. Es handelt sich um einen Index, der das weltweit grÃ¶Ãte Krypto-Asset abbildet. Sie erhalten Zugang zu Krypto-VermÃ¶genswerten mit der Sicherheit und dem Komfort eines traditionellen Anlageinstruments und reduzieren gleichzeitig die logistischen Zugangsbarrieren (Zugang zu BÃ¶rsen, Lagerungs- und AusfÃ¼hrungskosten)",
          "ETH main ist der Basisindex der ALGA INDEX DERIVATIVES PLATFORM. Es handelt sich um einen kapitalisierungsgewichteten Index, der die Wertentwicklung der wichtigsten finanziellen Krypto-Assets abbildet, die auf der Ethereum-Blockchain basieren. Sie erhalten Zugang zu Krypto-Assets mit der Sicherheit und Bequemlichkeit eines traditionellen Anlageinstruments und reduzieren gleichzeitig die logistischen Zugangsbarrieren (Zugang zu BÃ¶rsen, Lagerungs- und AusfÃ¼hrungskosten)",
          "Die BTC-Kombination ist der zugrunde liegende Index ALGA INDEX DERIVATIVES PLATFORM. Es handelt sich um einen ausgewogenen Index, der sich aus den wertvollsten Krypto-Assets zusammensetzt, die nach ihrer Marktkapitalisierung gewichtet sind, sich bewÃ¤hrt haben und auf bestimmte Risiken hin Ã¼berwacht und monatlich neu gewichtet werden. Der Index verfÃ¼gt Ã¼ber eine Ã¶ffentlich zugÃ¤ngliche Methodik fÃ¼r seine Bildung, die Zulassungsregeln, die Identifizierung kritischer Risiken (Lagerung, LiquiditÃ¤t, AusfÃ¼hrungskosten und andere) umfasst",
          "ETH combo ist der zugrunde liegende Index ALGA INDEX DERIVATIVES PLATFORM. Es handelt sich um einen ausgewogenen Index, der sich aus den wertvollsten Krypto-Assets zusammensetzt, die nach ihrer Marktkapitalisierung gewichtet sind, sich bewÃ¤hrt haben und auf bestimmte Risiken hin Ã¼berwacht und monatlich neu gewichtet werden. Der Index verfÃ¼gt Ã¼ber eine Ã¶ffentlich zugÃ¤ngliche Methodik fÃ¼r seine Bildung, die Zulassungsregeln, die Identifizierung kritischer Risiken (Lagerung, LiquiditÃ¤t, AusfÃ¼hrungskosten und andere) umfasst",
          "Stable Index ist ein stabiler Benchmark-Index ALGA INDEX DERIVATIVES PLATFORM, der sich aus den 6 wichtigsten KryptowÃ¤hrungs-Steiblocoins zusammensetzt, gewichtet nach Kapitalisierung. Der Index unterliegt keiner hohen MarktvolatilitÃ¤t, so dass Sie Ihre Ersparnisse in KryptowÃ¤hrungen fÃ¼r einen bestimmten Zeitraum behalten kÃ¶nnen. Ein stabiler Index ist ein intelligenter und sicherer Weg, um einen diversifizierten Zugang zu Krypto-Assets mit minimalen GebÃ¼hren zu erhalten",
        ],
      },
      inside: {
        title: "Was gibt es drin",
      },
      statistics: {
        title: "Statistiken",
        profitText: "Rendite <br> fÃ¼r {numb} Monate",
        selectProfit: "Die letzten {numb} Monate",
      },
      popup: {
        title: "Antrag auf Auszahlung",
        titleBuy: "Antrag auf Aufladung",
        text: "VerfÃ¼gbar zur Auszahlung:",
        amount: {
          label: "Geben Sie den Betrag in USDT ein",
        },
        "wallet-number": {
          label: "Kontonummer",
        },
        request: "Zu zahlen",
      },
    },
    "zh-CN": {
      buy: "ä¹°",
      indexderivatives: {
        title: "ææ°è¡çå",
        time: "ä» {from} è³ {to}",
        items: [
          "BTC main æ¯ ALGA INDEX DERIVATIVES PLATFORM çåºç¡ææ°ã å®æ¯ä¸ä¸ªæ¨å¨è¿½è¸ªä¸çä¸æå¤§çå å¯èµäº§çææ°ã æ¨å°è·å¾å·æä¼ ç»æèµå·¥å·çå®å¨æ§åä¾¿å©æ§çå å¯èµäº§è®¿é®æéï¼åæ¶éä½è¿å¥çåå¤éç¢ï¼è®¿é®äº¤æ¢ãå­å¨åæ§è¡ææ¬",
          "ETH main - ALGA INDEX DERIVATIVES PLATFORM åºç¡ææ°ã å®æ¯ä¸ä¸ªèµæ¬å æææ°ï¼ç¨äºè·è¸ªå»ºç«å¨ä»¥å¤ªååºåé¾ä¸çä¸»è¦éèå å¯èµäº§çè¡¨ç°ã æ¨å°è·å¾å·æä¼ ç»æèµå·¥å·çå®å¨æ§åä¾¿å©æ§çå å¯èµäº§è®¿é®æéï¼åæ¶éä½è¿å¥çåå¤éç¢ï¼è®¿é®äº¤æ¢ãå­å¨åæ§è¡ææ¬",
          "BTC ç»å - ALGA INDEX DERIVATIVES PLATFORM åºç¡ææ°ã å®æ¯ä¸ä¸ªå¹³è¡¡ææ°ï¼ç±ææä»·å¼çå å¯èµäº§ç»æï¼æå¸å¼å æï¼ç»è¿æ¶é´æµè¯å¹¶éè¿æ¯æéæ°å¹³è¡¡æ¥çæµæäºé£é©ã è¯¥ææ°æä¸å¥å¬å¼çå½¢ææ¹æ³ï¼åæ¬å¯æ¥åæ§è§åãè¯å«å³é®é£é©ï¼å­å¨ãæµå¨æ§ãæ§è¡ææ¬ç­",
          "ETH ç»å - ALGA INDEX DERIVATIVES PLATFORM åºç¡ææ°ã å®æ¯ä¸ä¸ªå¹³è¡¡ææ°ï¼ç±ææä»·å¼çå å¯èµäº§ç»æï¼æå¸å¼å æï¼ç»è¿æ¶é´æµè¯å¹¶éè¿æ¯æéæ°å¹³è¡¡æ¥çæ§æäºé£é©ã è¯¥ææ°æä¸å¥å¬å¼çå½¢ææ¹æ³ï¼åæ¬å¯æ¥åæ§è§åãè¯å«å³é®é£é©ï¼å­å¨ãæµå¨æ§ãæ§è¡ææ¬ç­",
          "ç¨³å®ææ°æ¯ä¸ä¸ªç¨³å®çåºç¡ææ° ALGA INDEX DERIVATIVES PLATFORMï¼ç±å å¯è´§å¸å¸åºä¸­ç 6 ä¸ªé¢åçç¨³å®å¸ç»æï¼æå¸å¼å æã è¯¥ææ°ä¸åå¸åºé«æ³¢å¨æ§çå½±åï¼è®©æ¨å¯ä»¥å¨ä¸å®æ¶æåä¿çæ¨çå å¯è´§å¸å¨èã ç¨³å®çç´¢å¼æ¯ä¸ç§æºè½ä¸å®å¨çæ¹å¼ï¼ä»¥æä½çè´¹ç¨è·å¾å¯¹å å¯èµäº§çå¤æ ·åè®¿é®",
        ],
      },
      inside: {
        title: "éé¢æä»ä¹",
      },
      statistics: {
        title: "ç»è®¡æ°æ®",
        profitText: "çå©è½å <br> ä¸ºäº {numb} æ",
        selectProfit: "æåç {numb} æ",
      },
      popup: {
        title: "ææ¬¾è¯·æ±",
        titleBuy: "å­æ¬¾ç³è¯·",
        text: "å¯ææ¬¾:",
        amount: {
          label: "å­æ¬¾éé¢, USDT",
        },
        "wallet-number": {
          label: "é±åå·ç ",
        },
        request: "çä¸è¯·æ±",
      },
    },
  },
};
export default {
  components: {
    RoundDiagram,
    AreaChart,
    MarkIcon,
    MiniAreaChart,
  },
  setup() {
    const slide= ref(1)
    const store = useStore();
    const { charts, getChart } = useChart();
    const {
      btnMainData,
      ethMainData,
      btcComboData,
      ethComboData,
      stableIndexData,
      btnMainTwoMonthPrecent,
      ethMainTwoMonthPrecent,
      btcComboTwoMonthPrecent,
      ethComboTwoMonthPrecent,
      stableIndexTwoMonthPrecent,
    } = useChartData();
    const { popup, isPopup, popupContent, buy, popupAction } =
      useBuyWidthdrawalPopup();
    const { t } = useI18n(i18n);

    const derivatives = computed(() => {
      const arr = store.getters["landing/derivatives"]
      if(typeDirevative.value === 'ALGA') {
        const newArr = arr.slice(0,5)
        // slide.value = newArr[0].id;
        return newArr
      }

      if(typeDirevative.value === 'Market'){
        const newArr = arr.slice(5)
        // slide.value = newArr[0].id;
        return newArr
      }
    });
    watch(()=>derivatives.value,(val)=> setTimeout(()=>slide.value = val[0].id,0) )
    const roundDiagramData = (currencys) => {
      return currencys.map((item) => +item["percent_share"]);
    };
    const roundDiagramColors = (currencys) => {
      return currencys.map((item) => item["bg_color"]);
    };

    const getChartData = (id) => {
      return getChart(id)?.chart.map((item) => [
        +item.timestamp * 1000,
        +item.value,
      ]);
    };
    const targetList = ref('')
    const openList = (target)=>{

      if( targetList.value === target) return targetList.value = ''
      targetList.value = target
      
    }
    const selectTypeDirevatives = (type)=>{
      typeDirevative.value= type
    }
    
    const typeDirevative = ref('ALGA')
    const typesDirevative = ['ALGA', 'Market']
    return {
      
      t,
      slide,
      derivatives,
      roundDiagramData,
      roundDiagramColors,
      getChartData,
      getChart,
      popup,
      popupAction,
      buy,
      isPopup,
      charts,

      openList,
      targetList,
      typeDirevative,
      typesDirevative,
      selectTypeDirevatives
    };
  },
  methods: {
    stage2(e, id) {
      ym(90160255, "reachGoal", "stage 2");
      this.buy(e, id);
      //   this.$router.push({ name: 'index-directive' })
    },
  },
};
</script>

<style lang="scss" scoped>
//$
.accordion {
  &__head {
    @apply tw-flex tw-items-center tw-justify-between  tw-px-9 tw-py-3.5 tw-w-full;
    background: #262D34;
  }
  &__body {
    @apply tw-grid  tw-overflow-hidden tw-my-0;
    @apply tw-transition-all tw-duration-300 tw-ease-out;
    grid-template-rows: 0fr;
    .child {
      @apply tw-min-h-0;
    }
  }
  .icon {
    @apply  tw-transition-transform tw-duration-300 tw-ease-out;
  }
  &.active &__head {
    background: #0A8F2D;
  }
  &.active .icon {
    @apply tw-transform tw-rotate-180;
  }
  &.active &__body {
    grid-template-rows: 1fr;
    margin-top: 20px;
    margin-bottom: 40px;
  }
}
.content-page {
  @screen xl {

    display: grid;
    grid-template-columns: 257px 1fr;
  }
  
  .item-chart {
    @apply tw-grid tw-grid-cols-2  tw-px-9 tw-py-3.5 tw-w-full;
    &:hover,
    &.active {
      background: #171d26;
      box-shadow: 0px 99.7167px 39.8867px rgba(1, 3, 24, 0.01),
        0px 55.97px 33.4533px rgba(1, 3, 24, 0.05),
        0px 25.09px 25.09px rgba(1, 3, 24, 0.09),
        0px 6.43333px 13.51px rgba(1, 3, 24, 0.1),
        0px 0px 0px rgba(1, 3, 24, 0.1);
    }
  }
}
.index-directive {
  .text {
    max-width: 539px;
  }
}
.slide-button {
  cursor: pointer;
  opacity: 0.5;
  width: 60px;
  height: 60px;
  transition: opacity 0.2s ease;
  @include screen-xl {
    width: 40px;
    height: 40px;
  }
  &.active {
    opacity: 1;
  }
}
.inside {
  display: flex;
  flex-direction: column;
  gap: 30px;
  width: 100%;
  & .table {
    width: 100%;
    &-head {
      padding: 10px 18px 10px 18px;
      @screen xl {
        padding: 10px 77px 10px 18px;
        display: flex;
        gap: 0;
        align-items:center;
      }
      
      .head-items {
        display: grid;
        grid-template-columns: 1fr 0.5fr 0.5fr ;
        margin-top: 10px;
        @screen xl {
          margin-top: 0px;
          flex-grow:1;
          grid-template-columns: 0.5fr 0.5fr 0.5fr ;
        }
      }
      & *:first-child {
        margin-left: -18px;
      }
      & *:not(:first-child) {
        justify-self: center;
      }
    }
    &-body {
      @apply tw-border tw-border-gray-border;

      .item {
        padding: 10px 18px 10px 18px;
        @screen xl {

          padding: 10px 77px 10px 18px;
        }
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 0.5fr 0.5fr ;
        &:not(:last-child) {
          @apply tw-border-b tw-border-gray-border;
        }
        & *:not(:first-child) {
          justify-self: center;
        }
      }
    }
  }
  @include screen-xl {
    flex-direction: row;
    gap: 110px;
    align-items: center;
  }
  &-card {
    width: 100%;
    height: 100%;
    @include screen-xl {
      width: 340px;
      height: 340px;
    }
  }
  &__round {
    width: 100%;
    height: 100%;
  }
}

.statistics {
  &__bottom {
    display: flex;
    flex-direction: column;
  }
  &__top,
  &__bottom {
    @include screen-xl {
      display: grid;
      gap: 55px;
      grid-template-columns: 1fr 170px;
    }
  }
}

.coinlist {
  .item {
    @include screen-xl {
      width: 318px;
    }
  }
}

.up-icon {
  width: 24px;
}
</style>
